<div class="chat-container flex flex-column justify-content-between">
  <div class="chat-header text-center text-xl p-1">Chatbot</div>
  <div class="message-container flex flex-column">
    <ng-container *ngFor="let message of messages | async">
      <div
        class="message shadow-2"
        [ngClass]="{
          from: message.sentBy === 'bot',
          to: message.sentBy === 'user'
        }"
      >
        <div>{{ message.content }}</div>
        <ng-container *ngIf="message.imageUrl">
          <img [src]="message.imageUrl" alt="Image" class="message-image" />
        </ng-container>
        <ng-container *ngIf="message.linkUrl">
          <a [href]="message.linkUrl" target="_blank" class="message-link">{{
            message.linkText
          }}</a>
        </ng-container>
      </div>
    </ng-container>
  </div>

  <div class="flex justify-content-center input-container">
    <p-inputGroup>
      <input
        class="p-inputtext-sm"
        [ngClass]="{ 'ng-invalid ng-dirty': isEmpty }"
        type="text"
        pInputText
        placeholder="Type a message..."
        [(ngModel)]="formValue"
        (ngModelChange)="updateIsEmpty()"
        (keyup.enter)="sendMessage()"
      />
      <button
        type="button"
        (click)="sendMessage()"
        pButton
        icon="pi pi-send"
        class="p-button"
        [disabled]="isEmpty"
      ></button>
    </p-inputGroup>
  </div>
</div>
